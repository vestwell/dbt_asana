version: 2

models:

  # enriched core object tables
  - name: asana__task
    description: An enriched task table consisting of base task info + aggregated metrics and lists
    columns:

      - name: task_id
        description: System generated unique ID of the task.
        tests:
          - unique
          - not_null

      - name: task_name
        description: User-facing name of the task

      - name: assignee_user_id
        description: Foreign key referencing the ASANA_USER that is currently assigned the task.

      - name: assignee_name
        description: Name of the user that the task is currently assigned to.

      - name: assignee_email
        description: Email of the user that the task is currently assigned to.

      - name: assignee_status
        description: Scheduling status for the assignee that the task is or will eventually be assigned to. This maps to the sections of "My Tasks"

      - name: is_completed
        description: Boolean that is true if the task is currently marked complete.

      - name: completed_at
        description: Timestamp of when the task was marked complete.

      - name: completed_by_user_id
        description: Foreign key referencing the USER who completed the task. Note that this may be different than the assignee

      - name: created_at
        description: Timestamp of when the task was created

      - name: due_date
        description: Date the task is due, if provided.

      - name: modified_at
        description: Timestamp of when the task was last modified

      - name: start_date
        description: The start date of the task, if a date range is given.

      - name: task_description
        description: Free-form text describing the task, as seen in the UI.

      - name: task_link
        description: URL formatted to bring you directly to the task in asana.

      - name: days_open
        description: The number of days the task has been/was open (creation -> completion)

      - name: is_currently_assigned
        description: Boolean, true if the task is *currently* assigned

      - name: has_been_assigned
        description: Boolean, true if the task has at one point been assigned, even if currently not.

      - name: days_since_last_assignment
        description: The number of days the task has been/was open and assigned to to the most recent user (last assignment -> completion)

      - name: days_since_first_assignment
        description: The number of days the task has been/was open and assigned at all (first time assigned -> completion)

      - name: last_assigned_at
        description: Timestamp of when the task was last assigned (to the current user if still assigned)

      - name: first_assigned_At
        description: Timestamp of when the task was first assigned to someone

      - name: first_modifier_user_id
        description: Foreign key referencing the ASANA_USER who made the first modification to the task (ie added a description). A proxy for task creator.

      - name: first_modifier_name
        description: Name of the user who made the first modification to the task

      - name: number_of_comments
        description: Count of comments made on the task

      - name: conversation
        description: The task's comments and authors aggregated into an ordered conversation, with authors + time sent

      - name: followers
        description: A list of the names of the users who follow the task.

      - name: number_of_followers
        description: Count of the users following the task

      - name: tags
        description: A list of the tags associated with the task.

      - name: number_of_tags
        description: Count of the tags associated with the task.

      - name: projects_sections
        description: A list of the projects + sections that this task is listed under.

      - name: is_subtask
        description: Boolean that's true if the task is a subtask of another.

      - name: parent_task_id
        description: Self-referential id of the parent TASK that this is a subtask of.

      - name: parent_task_name
        description: User-facing name of the task's parent task.

      - name: parent_assignee_user_id
        description: Foreign key referencing the ASANA_USER who is assigned the parent task

      - name: parent_assignee_name
        description: Name of the user assigned this task's parent task

      - name: parent_due_date
        description: Date on which the parent task is due, if given

      - name: parent_created_at
        description: Timestamp of when the parent task was created


  - name: asana__user
    description: Enriched user table consisting of base user info + metrics around tasks and completions
    columns:

      - name: user_id
        description: System generated unique ID of the user
        tests:
          - unique
          - not_null

      - name: user_name
        description: Name of the user as it appears in the UI

      - name: email
        description: The user's email

      - name: number_of_open_tasks
        description: Count of the currently open tasks assigned to this user

      - name: number_of_tasks_completed
        description: Count of the tasks that this user has completed

      - name: avg_close_time_days
        description: The avg number of days it has taken the user to complete tasks once assigned to them.

      - name: number_of_projects_owned
        description: Count of the projects that this user is the owner of (excludes archived projects)

      - name: number_of_projects_currently_assigned_to
        description: Count of the projects that the user is currently assigned open tasks to.

      - name: projects_working_on
        description: Aggregated list of the projects that the user is currently assigned to or owns


  - name: asana__project
    description: Table of projects' basic info enriched with metrics regarding tasks and completions
    columns:

      - name: project_id
        description: System-generated unique ID of the project.
        tests:
          - unique
          - not_null

      - name: project_name
        description: UI-facing name of the project

      - name: number_of_open_tasks
        description: Count of the currently open tasks in this project

      - name: number_of_assigned_open_tasks
        description: Count of the open and assigned tasks in this project.

      - name: number_of_tasks_completed
        description: Count of tasks that have been completed in this project

      - name: avg_close_time_days
        description: The avg number of days it has taken to close tasks in this project

      - name: avg_close_time_assigned_days
        description: The avg number of days it has taken to close tasks, since their *last* assignment, in this project

      - name: team_id
        description: Foreign key referencing the ASANA_TEAM that the project is associated with

      - name: team_name
        description: User-facing name of the project's team

      - name: is_archived
        description: Boolean representing if the project has been archived in the UI

      - name: project_link
        description: URL formatted to bring you directly to the project in asana.

      - name: created_at
        description: Timestamp of when the project was created

      - name: current_status
        description: The most recent progress status update for the project (free-form string)

      - name: due_date
        description: The date the project is due on, if given

      - name: last_modified_at
        description: Timestamp of when the project was last modified (doesn't include comments or tasks)

      - name: owner_user_id
        description: Foreign key referencing the USER who owns the project.

      - name: users_involved
        description: Aggregated list of the names + roles of the users involved (working on or owning) a project

      - name: number_of_users_involved
        description: Count of the unique users associated with the project

      - name: is_public
        description: Boolean that's true if public to the whole workspace, false if private.

      - name: sections
        description: Aggregated list of the sections that exist in the project.

      - name: notes
        description: Free-form textual description associated with project


  - name: asana__team
    description: Enriched team table consisting of basic team info + task/completion metrics (note that teams can only act on tasks in projects)
    columns:

      - name: team_id
        description: System generate unique ID for the team
        tests:
          - unique
          - not_null

      - name: team_name
        description: UI-facing name of the team.

      - name: number_of_open_tasks
        description: Count of the currently open tasks for this team.

      - name: number_of_assigned_open_tasks
        description: Count of the open and assigned tasks for the team.

      - name: number_of_tasks_completed
        description: Count of tasks that this team has completed.

      - name: avg_close_time_days
        description: The avg number of days it has taken projects of this team to close tasks.

      - name: avg_close_time_assigned_days
        description: The avg number of days it has taken projects of this team to close tasks, once assigned

      - name: active_projects
        description: Aggregated list of non archived projects associated with the team

      - name: number_of_active_projects
        description: Count of non-archived projects

      - name: number_of_archived_projects
        description: Count of archived projects

  - name: asana__tag
    description: Table of tag basic info enriched with some task metrics.
    columns:

      - name: tag_id
        description: System-generated unique ID for the tag
        tests:
          - unique
          - not_null

      - name: tag_name
        description: UI-facing name of the tag

      - name: created_at
        description: Timestamp of when the tag was created

      - name: number_of_open_tasks
        description: Count of the currently open tasks with this tag.

      - name: number_of_assigned_open_tasks
        description: Count of the open and assigned tasks with this tag.

      - name: number_of_tasks_completed
        description: Count of tasks with this tag that have been completed.

      - name: avg_days_open
        description: The avg number of days that completed tasks with this tag were open.

      - name: avg_days_assigned
        description: The avg number of days that completed tasks with this tag were open and assigned.


  - name: asana__daily_metrics
    description: Table of task metrics per each day
    columns:
      - name: date_day
        description: Unique day for which metrics are calculated.
        tests:
          - unique
          - not_null

      - name: number_of_tasks_open
        description: The number of tasks open at that point in time

      - name: number_of_tasks_open_assigned
        description: The number of tasks that are open on that day and have been assigned

      - name: number_of_tasks_created
        description: The number of tasks created on that day

      - name: number_of_tasks_completed
        description: The number of tasks completed on that day

      - name: avg_days_open
        description: The average time that all tasks open on this day have spent open.

      - name: avg_days_open_assigned
        description: The average time that all tasks open on this day have spent open and assigned.


  - name: year_end_testing
    description: Dataset used for YET squad to manage individual tasks and generate compliance packages.
    columns:

      - name: task_id
        description: System generated unique ID of the task.
        tests:
          - unique
          - not_null

      - name: task_name
        description: User-facing name of the task (task number, plan id number, and plan name).

      - name: task_number
        description: The task number exctracted from task_name using the following [regexp_substr(task_name,'[-+]?[0-9]*\.?[0-9]+')]

      - name: VW_PLAN_ID
        description: Plan ID number on Vestwell Admin site

      - name: ENTERPRISE
        description: Which enterprise this plan belongs to (Morgan Stanley/John Hancock)

      - name: SH_TYPE
        description: Which type of safe harbor this plan is (Non Elective/Match)

      - name: CURRENT_YEAR
        description: Whether or not we received current year census data

      - name: PRIOR_YEAR
        description: Whether or not we received prior year census data

      - name: MISSING_COMPENSATION
        description: Whether or not census data was provided without compensation for any employees

      - name: OTHER_PLAN
        description: From Questionnaire response - whether or not the company sponsors another plan

      - name: '"402_g_limit"'
        description: Employee failure of 402g limit for current year (and how it was resolved)

      - name: '"415_limit"'
        description: Employee failure of 415c limit for current year (and how it was resolved)

      - name: ACTIVE_ELIG_12_31_EOY_
        description: How many employees were active participants in the plan at the end of the current year

      - name: TH_THIS_YEAR
        description: Whether or not the plan is top heavy for the current year

      - name: MATCH_CAL_PERIOD
        description: Timing of when match contributions are made to the plan (pay period/year end)

      - name: PROFIT_SHARING
        description: Profit sharing request for the current year and whether or not it is billable

      - name: MATCH
        description: Match request for the current year and how it was calculated

      - name: DATE_SENT_YYYY_MM_DD_
        description: Date that the contribution report was sent

      - name: ADP_TEST_RESULT
        description: ADP result for the current testing year

      - name: ACP_TEST_RESULT
        description: ACP result for the current testing year

      - name: PRIOR_YEAR_ADP
        description: ADP result for the prior testing year

      - name: PRIOR_YEAR_ACP
        description: ACP result for the prior testing year

      - name: D_3_DISCREPANCIES
        description: Discrepancies between the year end census submitted data and the aggregated payroll data for the current testing year.

      - name: TH_NEXT_YEAR
        description: Top heavy status for next year based on current year end balances

      - name: FUNDING_DEADLINE_2022_MM_DD_
        description: From Questionnaire response - sponsor tax filing deadline.

      - name: conversation
        description: The task's comments and authors aggregated into an ordered conversation, with authors + time sent

      - name: number_of_comments
        description: Count of comments made on the task

      - name: tags
        description: A list of the tags associated with the task.

      - name: task_description
        description: Free-form text describing the task, as seen in the UI.

      - name: assignee_user_id
        description: Foreign key referencing the ASANA_USER that is currently assigned the task.

      - name: assignee_name
        description: Name of the user that the task is currently assigned to.

      - name: project_id
        description: System-generated unique ID of the project.

      - name: is_completed
        description: Boolean that is true if the task is currently marked complete.

      - name: completed_at
        description: Timestamp of when the task was marked complete.

      - name: completed_by_user_id
        description: Foreign key referencing the USER who completed the task. Note that this may be different than the assignee

      - name: created_at
        description: Timestamp of when the task was created

      - name: due_date
        description: Date the task is due, if provided.

      - name: first_modifier_name
        description: Name of the user who made the first modification to the task

      - name: modified_at
        description: Timestamp of when the task was last modified

      - name: TASK_MINS
        description: The number of minutes to complete a task (NOT inclusive of waiting time).

      - name: task_link
        description: URL formatted to bring you directly to the task in asana.

      - name: days_open
        description: The number of days the task has been/was open (creation -> completion)

      - name: is_currently_assigned
        description: Boolean, true if the task is *currently* assigned

      - name: has_been_assigned
        description: Boolean, true if the task has at one point been assigned, even if currently not.

      - name: days_since_last_assignment
        description: The number of days the task has been/was open and assigned to to the most recent user (last assignment -> completion)

      - name: days_since_first_assignment
        description: The number of days the task has been/was open and assigned at all (first time assigned -> completion)

      - name: last_assigned_at
        description: Timestamp of when the task was last assigned (to the current user if still assigned)

      - name: first_assigned_At
        description: Timestamp of when the task was first assigned to someone


  - name: restatements
    description: Dataset used for Plan Docs to manage individual tasks and restatements project.
    columns:

      - name: task_id
        description: System generated unique ID of the task.
        tests:
          - unique
          - not_null

      - name: task_name
        description: User-facing name of the task (task number, plan id number, and plan name).

      - name: task_number
        description: The task number exctracted from task_name using the following [regexp_substr(task_name,'(C3 )+[0-9]*\.?[0-9]')]

      - name: VW_PLAN_ID
        description: Plan ID number on Vestwell Admin site

      - name: address
        description: TK

      - name: company_affil_serv_grp
        description: TK

      - name: company_city
        description: TK

      - name: company_cont_grp
        description: TK

      - name: company_employer_id
        description: TK

      - name: company_name
        description: TK

      - name: company_phone
        description: TK

      - name: company_phone_ac
        description: TK

      - name: company_state
        description: TK

      - name: company_tax_year
        description: TK

      - name: company_zip
        description: TK

      - name: drafting_round
        description: TK

      - name: entity_type
        description: TK

      - name: issue_dual_eligibility
        description: TK

      - name: issue_excluded_employees
        description: TK

      - name: issue_fringe_benefit_exclusion
        description: TK

      - name: issue_missing_joinder_agreements
        description: TK

      - name: issue_plan_year_end
        description: TK

      - name: issue_pre_entry_comp_exclusion
        description: TK

      - name: issue_prior_year_testing
        description: TK

      - name: issue_write_in_comp_exclusion
        description: TK

      - name: joinder_list
        description: TK

      - name: plan_line_1
        description: TK

      - name: trustee_1
        description: TK

      - name: zendesk_case_link
        description: TK

      - name: conversation
        description: The task's comments and authors aggregated into an ordered conversation, with authors + time sent

      - name: number_of_comments
        description: Count of comments made on the task

      - name: tags
        description: A list of the tags associated with the task.

      - name: task_description
        description: Free-form text describing the task, as seen in the UI.

      - name: assignee_user_id
        description: Foreign key referencing the ASANA_USER that is currently assigned the task.

      - name: assignee_name
        description: Name of the user that the task is currently assigned to.

      - name: project_id
        description: System-generated unique ID of the project.

      - name: is_completed
        description: Boolean that is true if the task is currently marked complete.

      - name: completed_at
        description: Timestamp of when the task was marked complete.

      - name: completed_by_user_id
        description: Foreign key referencing the USER who completed the task. Note that this may be different than the assignee

      - name: created_at
        description: Timestamp of when the task was created

      - name: due_date
        description: Date the task is due, if provided.

      - name: first_modifier_name
        description: Name of the user who made the first modification to the task

      - name: modified_at
        description: Timestamp of when the task was last modified

      - name: TASK_MINS
        description: The number of minutes to complete a task (NOT inclusive of waiting time).

      - name: task_link
        description: URL formatted to bring you directly to the task in asana.

      - name: days_open
        description: The number of days the task has been/was open (creation -> completion)

      - name: is_currently_assigned
        description: Boolean, true if the task is *currently* assigned

      - name: has_been_assigned
        description: Boolean, true if the task has at one point been assigned, even if currently not.

      - name: days_since_last_assignment
        description: The number of days the task has been/was open and assigned to to the most recent user (last assignment -> completion)

      - name: days_since_first_assignment
        description: The number of days the task has been/was open and assigned at all (first time assigned -> completion)

      - name: last_assigned_at
        description: Timestamp of when the task was last assigned (to the current user if still assigned)

      - name: first_assigned_At
        description: Timestamp of when the task was first assigned to someone
